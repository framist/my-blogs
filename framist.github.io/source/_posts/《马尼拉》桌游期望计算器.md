---
title: 《马尼拉》桌游期望计算器
date: 2025-04-21 23:19:35
categories:
  - 计算机
tags:
  - Vue
abbrlink: manila-calculator
---

> 注：本项目计算结果可能不够准确，欢迎游戏爱好者提供协助！也求个 star 😆✨
>
> [在线使用](https://framist.github.io/manila/) | [GitHub](https://github.com/framist/manila)
>
> *本 Blog 由 Claude 3.7 Sonnet 辅助书写*

## 项目简介

马尼拉期望计算器是一个基于 Vue 3 + Vite 开发的网页应用，专为《马尼拉》桌游爱好者打造。这款工具通过科学的数学计算，帮助玩家分析当前局势下各种决策的期望收益，从而在这个充满不确定性的远东商业竞争桌游中做出更明智的选择。

<!-- more -->

## 功能特色

1. **全面的局势分析**：根据当前船只位置、已占用点位、轮次等实际游戏状态，计算各类位置的期望收益
2. **精确的概率计算**：应用动态规划算法精确计算船只抵达港口、停在特定位置的概率
3. **直观的数据展示**：通过表格清晰展示各位置的成本、收益、到达概率与最终期望净收益
4. **高亮收益点位**：自动标记具有正期望值的位置，帮助玩家快速找到最优选择

## 实用场景

在《马尼拉》游戏中，玩家需要在多种选择中权衡利弊：是在人参船上放置帮手，还是选择投资港口？是当海盗船长还是保险员更有利可图？这些选择往往涉及复杂的概率计算和期望分析。

使用本计算器，玩家可以：

- 在放置帮手前快速评估各点位的期望收益
- 了解不同船只成功到达目的地的概率
- 计算特殊位置（如海盗、领航员、保险员）的价值
- 基于当前局势做出最优策略决策

## 使用方法

1. 设置当前游戏轮次（第几次投掷前）
2. 选择场上已有的船只及其当前位置
3. 标记已被占用的各类点位
4. 查看右侧表格中各点位的期望收益分析
5. 优先选择高亮显示（具有正期望值）的位置

## 结语

虽然马尼拉是一款充满运气成分的桌游，但通过科学的概率分析，玩家可以显著提高获胜几率。本计算器不仅是一个游戏工具，也是桌游与数学结合的绝佳示例，帮助玩家理解期望值理论在实际决策中的应用。

无论你是马尼拉新手还是老手，这款工具都能帮助你在游戏中做出更加明智的决策，提升游戏体验和胜率。

---

*以下为详细规则说明，保留原文，便于查阅*

## 游戏概况

《马尼拉》是一款适合 3 - 5 名 10 岁及以上玩家的远东商业竞争桌游。游戏背景设定在 1821 年，当时菲律宾群岛已被西班牙统治长达 250 年。但西班牙人并未能完全掌控一切，当地居民在殖民统治的阴影下，秘密与邻近岛屿及亚洲大陆开展海上贸易。他们乘坐外形奇特的平底船和脆弱的竹筏，满载肉豆蔻、丝绸、玉石和人参等货物，驶向马尼拉进行走私。由于船只和船长的适航性不佳，每次航行的结果都充满不确定性，而且海盗还会伺机掠夺那些无法逃脱的船只。尽管如此，成功抵达马尼拉黑市的货物能卖出高价，这使得冒险对那些成功的人来说物有所值。黑市商人通过各种手段确保自己获得货物，比如贿赂领航员、为货物投保，甚至有些富商还会雇佣海盗袭击黑市船只，从中谋取暴利。

## 游戏组件

1. **4 种货物的装载物**：分别为肉豆蔻、丝绸、人参和玉石。
2. **1 个游戏版图**：上面绘制有码头、造船厂、海盗船、领航员岛屿、保险办公室、黑市交易区以及各条海上航线等区域。
3. **4 个骰子**：颜色分别与 4 种货物对应，用于决定船只的移动步数。
4. **4 个价值指示物**：颜色与货物对应，放置在黑市交易区，用来标记货物的价值。
5. **3 艘平底船**：玩家装载货物后，船只将沿着海上航线驶向马尼拉。
6. **20 个帮手**：玩家可将他们部署在不同位置，以获取收益。
7. **20 张份额**：4 种货物各 5 张，玩家通过持有份额来参与货物的收益分配。
8. **菲律宾货币“比索”硬币**：用于游戏中的交易、支付等。
9. **规则手册**：详细介绍游戏玩法。

## 游戏准备

1. **资金分配**：每位玩家领取 30 比索，剩余硬币作为港口现金箱放置在游戏版图旁。
2. **领取帮手**：每位玩家领取 3 个与自己颜色相同的帮手；若只有 3 名玩家参与游戏，则每位玩家领取 4 个帮手。
3. **抽取份额**：从 20 张份额中，每种货物各取 3 张，洗牌后背面朝下放置。每位玩家抽取 2 张，查看后不要让其他玩家知晓。然后将剩余份额按货物种类分类，放置在游戏版图旁。
4. **放置价值指示物**：将 4 个价值指示物放置在黑市交易区的最低位置，颜色与相应货物对应。
5. **摆放其他组件**：将平底船、货物装载物和骰子放置在游戏版图旁。

## 游戏流程

游戏由多个“航行回合”组成，每个回合按以下顺序进行：

### 1. 港口船长办公室拍卖及履职

- **拍卖规则**：首回合由最年长的玩家开始叫价，起拍价至少 1 比索，也可选择 Pass。后续回合由上一回合的港口船长开始叫价。玩家依次轮流，可选择 Pass 或出价更高的金额。一旦玩家在本回合 Pass，就不能再重新参与竞价。拍卖持续进行，直到除一名玩家外其他人都 Pass，出价最高者赢得拍卖，向港口现金箱支付最后出价金额，成为新的港口船长。若无人出价，则上一任港口船长继续担任本回合船长。玩家叫价不能超过自己的支付能力，必要时可通过抵押份额贷款（详见“贷款规则”）。
- **船长职责**：
  - **购买份额**：船长可决定是否购买份额。若购买，从游戏版图上选取心仪份额，根据黑市上该货物的当前价值支付相应金额给港口现金箱，但最低价格为 5 比索。只有船长能购买份额，且并非强制购买。
  - **装载货物**：船长为 3 艘平底船各装载一种货物，决定哪种货物不装载。
  - **放置平底船**：将 3 艘平底船放置在海上航线的起始位置。每条航线有编号 0 - 13 的格子，终点是目的港。平底船放置在编号 0 - 5 的起始位置，且 3 个起始位置编号之和必须为 9，同时不能有两艘平底船在同一条航线。

### 2. 部署帮手与移动平底船

- **部署帮手**：此阶段包含多个帮手部署轮次和船只移动轮次。由港口船长开始，顺时针轮流，每位玩家每次在任意空闲的帮手位置放置 1 个帮手，并按该位置所示金额向港口现金箱支付费用（保险位置除外）。玩家也可选择不放置帮手，但一旦选择不放置，本回合就不能再放置其他帮手。若玩家没钱且无法贷款，可将帮手作为“免费乘客”免费放置（详见“贷款规则”和“免费乘客规则”）。帮手可部署在以下位置：
  - **装载货物的平底船**：目标是让帮手所在平底船成功抵达目的港，玩家可分享货物利润；风险是若平底船未抵达目的港，玩家投资无回报。不同货物的平底船帮手位置数量不同，人参、丝绸和肉豆蔻各有 3 个，玉石有 4 个，玩家应选择所需货物最低价格的空闲位置放置帮手。
  - **港口和造船厂**：玩家可在港口和造船厂的空闲位置部署帮手。目的是当平底船抵达这些位置时，玩家可获得相应报酬；风险是若没有平底船到达所选位置，玩家投资无回报。
  - **海盗船**：海盗船有两个帮手位置，先使用的玩家占据船头位置成为船长。目标是海盗可登上在第二轮移动结束时位于 13 号格子的平底船，或掠夺第三轮移动结束时位于 13 号格子的平底船；风险是若没有平底船到达 13 号格子，玩家投资无回报。
  - **领航员岛屿**：领航员岛屿有两个帮手位置，分为“大领航员”和“小领航员”，“大领航员”位置更贵但回报更好。目标是在平底船第三轮移动前，领航员可帮助或阻碍未到达港口的平底船；风险是施加的影响未达到预期目标。
  - **保险办公室**：玩家在此放置帮手无需付费，还可立即从港口现金箱获得 10 比索“保险金”。目标是若三轮移动后没有平底船抵达码头，玩家可保留这笔保险金；风险是每有一艘平底船抵达码头，保险帮手需支付修理费用，并负责向该平底船相关位置的帮手支付利润（详见“保险赔付规则”）。
- **移动平底船**：完成帮手部署后，港口船长滚动 3 个与装载货物颜色对应的骰子，根据骰子点数移动平底船。平底船只能在自己的航线上移动，不能改变航线，也不能在途中丢失或交换货物。平底船若移动超过 13 号格子，就到达目的港；若三轮移动后未到达 13 号格子，则需放置在造船厂（若在第二轮或第三轮移动结束时停在 13 号格子且有海盗，则被海盗袭击，详见“海盗行动规则”）。若平底船到达目的港时还有剩余移动点数，则丢弃；其他情况船长不能选择丢弃平底船的移动点数。
- **海盗行动**：当平底船在移动回合结束时停在 13 号格子，海盗会发动袭击。若平底船在第二轮移动结束时停在 13 号格子，海盗会登船；若在第三轮移动结束时停在 13 号格子，海盗会掠夺货物。若平底船因领航员影响到达 13 号格子，但不是在移动回合结束时，则不会被海盗袭击。海盗登船时，玩家将海盗移动到平底船的空闲位置，若没有空闲位置则无法登船。海盗船长优先登船，之后第二名海盗可选择登船或留在海盗船等待掠夺。若海盗掠夺平底船，船上所有帮手将被移除返回玩家手中，海盗从港口现金箱获得被掠夺平底船的收益，海盗船长决定被掠夺平底船是停靠港口还是送去造船厂，若选择港口，被掠夺货物价值会上升。
- **领航员行动**：在第三轮平底船移动前，“小领航员”可移动一艘平底船一格（向前或向后），“大领航员”可移动一艘平底船最多两格，或移动两艘平底船各一格（可自行决定向前或向后移动）。领航员不能影响已到达马尼拉的平底船。若领航员将平底船移动超过 13 号格子，平底船到达目的港并放置在空闲港口位置；若移动到 13 号格子，在移动回合结束前海盗不会袭击。港口船长需在领航员行动后，才能滚动骰子移动平底船，且每位领航员可自主决定是否行动。

### 3. 利润分配

- **海盗帮手**：只有在平底船第三轮移动结束时停在 13 号格子且被掠夺，海盗帮手才能获得利润，他们平分掠夺所得。若只有一名海盗在海盗船，他将获得全部利润，被掠夺平底船上的其他帮手空手而归。
- **装载货物的平底船帮手**：只有所在平底船成功到达马尼拉目的港，这些帮手才能获得利润，他们平分该货物的利润。若平底船受损被送去造船厂，船上帮手无收益。
- **港口/造船厂帮手**：只有平底船停靠在他们部署的港口或造船厂位置，这些帮手才能获得利润。港口位置的利润由港口现金箱支付，造船厂位置的利润由保险帮手支付（若没有保险帮手，则由港口现金箱支付）。若部署位置空闲，帮手无收益。
- **领航员帮手**：不能直接获得利润。
- **保险赔付**：进入造船厂的平底船需要修理，保险帮手负责支付修理费用。若有玩家在平底船停靠的造船厂位置部署了帮手，保险帮手向该玩家支付费用；若无人部署，则向港口现金箱支付。保险支付金额根据造船厂位置所示数字确定。保险帮手玩家可先领取本回合利润，再支付平底船修理费用。若现金不足，需贷款支付；若贷款后仍无法支付全部金额，先支付能支付的部分，剩余部分由港口现金箱支付，玩家无需偿还港口现金箱支付的部分。

### 4. 货物价值上升

所有成功到达马尼拉目的港的货物，在黑市上的价值上升一格（例如从 0 上升到 5），通过移动黑市交易区的价值指示物来体现。未到达港口的货物价值不变。之后，为下一回合做准备，将所有平底船和货物装载物放置在游戏版图边缘，玩家收回所有帮手，下一回合从港口船长办公室拍卖开始。

## 游戏结束与获胜条件

当黑市交易区中至少一种货物的价值指示物达到 30 时，游戏结束。每位玩家计算自己的现金（比索），加上持有的份额价值（根据黑市上货物的当前价值），再减去未偿还的贷款（每有一份抵押份额需减去 15 比索），最终总和即为玩家的“财富值”。财富值最高的玩家成为马尼拉最成功的商人，赢得游戏。

## 变体规则

海盗在平底船没有空闲位置时也可登船。登船玩家移除平底船上一名帮手返回其玩家手中，将自己的海盗放置在该位置。但如果 13 号格子上有其他平底船存在空闲位置，海盗必须先填充这些位置，只有当所有平底船都没有空闲位置时，海盗才能替换帮手。若两名海盗登上同一艘平底船，第二名海盗不能替换刚登上船的海盗船长。

---

## 每个放置帮手点位的花费和收益

在《马尼拉》桌游中，玩家可将帮手部署在不同位置，各位置的花费与收益情况如下：
以下是根据图片内容整理的各点位花费和收益信息：

- **装载货物的平底船（Wares on board the punts）**
  - **花费**：玩家选择放置帮手中意货物的最低价格空位。
    - 人参有 3 个帮手位：各花费 1、2、3
    - 丝绸有 3 个帮手位：花费 3、4、5
    - 肉豆蔻有 3 个帮手位：各花费 2、3、4
    - 玉石平底船有 4 个帮手位：各花费 3、4、5、5
  - **收益**：若所选平底船在本航次抵达港口目的地，帮手可平分收益。
    - 人参：共 18 比索
    - 丝绸：共 30 比索
    - 肉豆蔻：共 24 比索
    - 玉石：共 36 比索
  - **风险**：所选平底船未抵达目的港，帮手无利润可分，投资无回报。
- **港口和造船厂（Port and shipyard spaces）**
  - **花费**：按港口和造船厂部署空间上方标明的金额支付。
    - A 港口或造船厂：4 比索
    - B 港口或造船厂：3 比索
    - C 港口或造船厂：2 比索
  - **收益**：平底船在航行结束时抵达部署帮手的港口或造船厂空间，玩家可获得相应支付金额。
    - A 港口或造船厂：6 比索
    - B 港口或造船厂：8 比索
    - C 港口或造船厂：15 比索
  - **风险**：无平底船抵达所选港口或造船厂，投资无回报。
- **海盗船（Pirate spaces）**
  - **花费**：2 个帮手位置，先使用的玩家占据船头位置成为船长。
    - 海盗船头位置：5 比索
    - 海盗船尾位置：5 比索
  - **收益**：平底船在第二轮移动结束时处于 13 号空间，海盗可登船；在第三轮移动结束时处于 13 号空间，海盗可掠夺货物并分享利润。
  - **风险**：无平底船到达 13 号空间，投资无回报。
- **领航员岛屿（Pilot spaces）**
  - **花费**：“大”领航员位置更贵，“小”领航员位置花费相对较少，分别为 5 比索和 2 比索。
  - **收益**：在平底船第三轮移动前，领航员可协助或阻碍尚未抵达港口的平底船，但不直接获利。
  - **风险**：施加的影响未达预期目标。
- **保险办公室（Insurance）**
  - **花费**：无需支付。
  - **收益**：放置帮手后，玩家立即从港口现金箱获得 10 比索“保险金” 。
  - **风险**：每有一艘平底船抵达码头，保险帮手需支付修理费，并负责向相关位置的帮手分配利润。
